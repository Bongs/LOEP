<!-- The individual checkbox information is stored in the following slots: item18, item19 and item20 -->
<%item2checkbox1Value = @evaluation.send("item18")%>
<%item2checkbox2Value = @evaluation.send("item19")%>
<%item2checkbox3Value = @evaluation.send("item20")%>

<%= f.hidden_field "item18", :value => item2checkbox1Value %>
<%= f.hidden_field "item19", :value => item2checkbox1Value %>
<%= f.hidden_field "item20", :value => item2checkbox1Value %>

<p class="input_wrappers_header"> The user has:</p>
<p class="input_wrapper">
  <input value="18" type="checkbox" class="skipValidation" <%= item2checkbox1Value==1 ? "checked='checked'" : "" %> <%= readonly ? "disabled=\"disabled\"" : ""%>></input>
  <span>Ability to move through instructional elements at own speed.</span>
</p>
<p class="input_wrapper">
  <input value="19" type="checkbox" class="skipValidation" <%= item2checkbox2Value==1 ? "checked='checked'" : "" %> <%= readonly ? "disabled=\"disabled\"" : ""%>></input>
  <span>Ability to redo or relearn component before moving on.</span>
</p>
<p class="input_wrapper">
  <input value="20" type="checkbox" class="skipValidation" <%= item2checkbox3Value==1 ? "checked='checked'" : "" %> <%= readonly ? "disabled=\"disabled\"" : ""%>></input>
  <span>Ability to make choice about the paths to take so that one can progress at own learning level.</span>
</p>

<script type="text/javascript">
  $(document).ready(function(){
    <% if !readonly %>
      var getItem2Score = function(){
        var score = 1;
        var item2CheckboxChecked = 0;
        $("div.survey_block[item='2'] input[type='checkbox']").each(function(index,input){
          if($(input).is(":checked")){
            item2CheckboxChecked += 1;
            $("#evaluations_loem_item"+$(input).attr("value")).attr("value",1);
          }else{
            $("#evaluations_loem_item"+$(input).attr("value")).attr("value",0);
          }
        });

        switch(item2CheckboxChecked){
            case 3:
                score = 3;
                break;
            case 2:
                score = 2;
                break;
            default:
                score = 1;
        };

        return score.toString();
      };

      $("div.survey_block[item='2'] input[type='checkbox']").on("change", function(e){
        var item2Value = getItem2Score();

        if(typeof item2Value == "string"){
          $("#evaluations_loem_item1").attr("value",item2Value);
          updateValueForItem(2,item2Value);
        } else {
          updateValueForItem(2,undefined);
        }
      });
    <% end %>
  });
</script>